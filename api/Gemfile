source 'https://rubygems.org'

begin
  $: << File.realpath(File.join(__dir__, 'lib'))
rescue Errno::ENOENT
end

gem 'haveapi', '~> 0.17.0'
gem 'activerecord', '~> 7.0.4'
gem 'sinatra-activerecord', '~> 2.0.23'
gem 'paper_trail', '~> 14.0.0'
gem 'require_all', '~> 2.0.0'
gem 'rake'
gem 'composite_primary_keys', '~> 14.0.6'
gem 'eventmachine'
gem 'ancestry', '~> 4.3.3'
gem 'mysql2', '~> 0.5.3'
gem 'bcrypt', '~> 3.1.13'
gem 'ipaddress', '~> 0.8.0'
gem 'rotp', '~> 6.2.2'
gem 'rubyzip', '~> 2.3.2' # needed by vpsFree.cz's incident reports
gem 'thin'
gem 'prometheus-client', '~> 4.1.0'

group :test do
  gem 'rspec'
end

group :development do
  gem 'pry'
  gem 'yard'
end

### vpsAdmin plugin marker ###
# Do not remove the comment above. It is used to create a Nix package with
# resolved plugin dependencies.
Dir.glob(File.expand_path("../plugins/*", File.realpath(__FILE__))) do |v|
  path = File.join(v, 'api', 'Gemfile')
  next unless File.exist?(path)

  eval_gemfile path
end
